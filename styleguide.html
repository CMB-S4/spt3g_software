<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Style Guide &#8212; SPT3G Software  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="_static/nature.css?v=279e0f84" />
    <script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Network Streaming" href="networkstreaming.html" />
    <link rel="prev" title="Build System" href="buildsystem.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="networkstreaming.html" title="Network Streaming"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="buildsystem.html" title="Build System"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">SPT3G Software  documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Style Guide</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="style-guide">
<h1>Style Guide<a class="headerlink" href="#style-guide" title="Link to this heading">¶</a></h1>
<section id="version-control-hygiene">
<h2>Version Control Hygiene<a class="headerlink" href="#version-control-hygiene" title="Link to this heading">¶</a></h2>
<p>You can use two mechanisms to access the repository: git and SVN. The following is a brief overview of how to use these in a way that your collaborators will appreciate.</p>
<section id="git">
<h3>Git<a class="headerlink" href="#git" title="Link to this heading">¶</a></h3>
<p>To initially check out the repository:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://user@github.com/CMB-S4/spt3g_software.git
</pre></div>
</div>
<p>To update your checkout (the –rebase is important, especially if you have local changes):</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>pull<span class="w"> </span>--rebase
</pre></div>
</div>
<p>To send your changes back:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>diff<span class="w"> </span>files_to_commit<span class="w"> </span>&lt;-<span class="w"> </span>Examine<span class="w"> </span>this
git<span class="w"> </span>commit<span class="w"> </span>files_to_commit
git<span class="w"> </span>push
</pre></div>
</div>
</section>
<section id="svn">
<h3>SVN<a class="headerlink" href="#svn" title="Link to this heading">¶</a></h3>
<p>To initially check out the repository:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>svn<span class="w"> </span>co<span class="w"> </span>https://user@github.com/CMB-S4/spt3g_software/trunk<span class="w"> </span>spt3g_software
</pre></div>
</div>
<p>To update your checkout:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>svn<span class="w"> </span>up
</pre></div>
</div>
<p>To send your changes back:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>svn<span class="w"> </span>diff<span class="w"> </span>files_to_commit<span class="w"> </span>&lt;-<span class="w"> </span>Examine<span class="w"> </span>this
svn<span class="w"> </span>ci<span class="w"> </span>files_to_commit
</pre></div>
</div>
</section>
</section>
<section id="coding-style">
<h2>Coding Style<a class="headerlink" href="#coding-style" title="Link to this heading">¶</a></h2>
<p>We have style guidelines for both Python and C code. These are intended to keep code readable and avoid jarring transitions before code written by different people. These are summarized below. In general, the guiding principle is to make new code look like existing code. If you run into a file that obviously violates these style guidelines, please (a) hit the author with a stick and (b) do <em>not</em> change the style yourself. When adding to files that conform to some consistent, but different, style, prefer the style of the existing code to these guidelines unless you are replacing more than 50% of the file.</p>
<section id="python-style-guide">
<h3>Python Style Guide<a class="headerlink" href="#python-style-guide" title="Link to this heading">¶</a></h3>
<p>For python we will be following <a class="reference external" href="https://www.python.org/dev/peps/pep-0008/">PEP8</a> (the style guide for the python standard library).
PEP8 is a fairly significant document, so I will summarize the important points.
Nonetheless, it is a generally good idea to read at least the section on <a class="reference external" href="https://www.python.org/dev/peps/pep-0008/#a-foolish-consistency-is-the-hobgoblin-of-little-minds">readability</a>.
These are what we consider the most important points of PEP8:</p>
<ul class="simple">
<li><p>Function and variables names should be lower case, with words separated by underscores,
when it improves readability.</p></li>
<li><p>Class names should use CapitalizedWords.</p></li>
<li><p>Constants should be in ALL_CAPS.</p></li>
<li><p>Non-public class methods and instance variables should begin with a single underscore
(this is baked into the way python implements classes).</p></li>
<li><p>Lines should be short.  The standard convention is 79 characters.  We’re not going to be anal
about this, but long lines should not be significantly longer than that, as they are hard to read.
For reference, most terminals open at 80 characters wide.</p></li>
<li><p>Indentation should be done with 4 spaces.  At least one person is going to continue to violate
this rule, so we should generally</p></li>
</ul>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">CONSTANT_VALUE</span> <span class="o">=</span> <span class="mi">10</span>

<span class="k">def</span> <span class="nf">function_name</span><span class="p">(</span><span class="n">variable_name</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
    <span class="n">do_some_things</span>

<span class="k">class</span> <span class="nc">MyClass</span><span class="p">:</span>
    <span class="n">CONSTANCE_INSTANCE_VARIABLE</span> <span class="o">=</span> <span class="mi">100</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">input</span><span class="p">,</span> <span class="n">other_input</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instance_variable</span> <span class="o">=</span> <span class="nb">input</span> <span class="o">+</span> <span class="n">other_input</span>

    <span class="k">def</span> <span class="nf">class_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">input</span><span class="p">):</span>
        <span class="n">do_things</span>
</pre></div>
</div>
<p>For classes, modules, and functions individuals are HIGHLY encouraged to use the standard SPT3G docstring format.
This includes individually defining each argument and output of a function along with their default values and types.
Below is an example of a well written docstring using the <a class="reference external" href="https://numpydoc.readthedocs.io/en/latest/format.html">numpy</a> docstring format.
Please adhere to this format for all spt3g_software code.</p>
<p>Docsting example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_fft_scale_fac</span><span class="p">(</span><span class="n">res</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">n1</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">n2</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                      <span class="n">apod_mask</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a scale factor to convert a 2d fft of a map into</span>
<span class="sd">    sqrt(C_l) normalized units by scaling it by the sky area.</span>
<span class="sd">    In particular it returns:</span>
<span class="sd">      np.mean(apod_mask**2)**0.5 * (n1 * n2)**0.5 / reso_rad</span>

<span class="sd">    For forward transforms: fft2(mp)  / scale_fac</span>
<span class="sd">    For inverse transforms: ifft2(mp) * scale_fac</span>

<span class="sd">    Arguments</span>
<span class="sd">    ---------</span>
<span class="sd">    res : float, default=None</span>
<span class="sd">        Resolution of the map in G3Units.</span>
<span class="sd">        Must be specified if parent is None.</span>
<span class="sd">    n1 : int, default=None</span>
<span class="sd">        Number of map pixels in x direction.</span>
<span class="sd">        Must be specified if parent is None.</span>
<span class="sd">    n2 : int, default=None</span>
<span class="sd">        Number of map pixels in y direction.</span>
<span class="sd">        Must be specified if parent is None.</span>
<span class="sd">    apod_mask : FlatSkyMap or ndarray, default=None</span>
<span class="sd">        An apodization mask.</span>
<span class="sd">    parent : FlatSkyMap, default=None</span>
<span class="sd">        Parent Map object containing resolution and shape info.</span>
<span class="sd">        Must be specified if res, n1, and n2 are None.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    float</span>
<span class="sd">        FFT normalization factor</span>

<span class="sd">    See Also</span>
<span class="sd">    -------</span>
<span class="sd">    ft_to_map</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
</section>
<section id="c-style-guide">
<h3>C++ Style Guide<a class="headerlink" href="#c-style-guide" title="Link to this heading">¶</a></h3>
<p>C and C++ code in the tree is supposed to follow the <a class="reference external" href="https://www.freebsd.org/cgi/man.cgi?query=style&amp;sektion=9">KNF</a> conventions. On Mac OS X systems, you have a local copy of this guide installed in a man page named <code class="docutils literal notranslate"><span class="pre">style</span></code>. Like PEP8, the document is long, so a brief summary follows. The general rules are similar to PEP8 in most cases.</p>
<ul class="simple">
<li><p>Variable and global function names should be lower case, with words separated by underscores when it improves readability.</p></li>
<li><p>Class names and class member function should use CapitalizedWords.</p></li>
<li><p>Constants should be in ALL_CAPS, as should all macros created with <code class="docutils literal notranslate"><span class="pre">#define</span></code>.</p></li>
<li><p>Non-public class variables should end with a single underscore.</p></li>
<li><p>Indentation for control flow marking (e.g. inside an <code class="docutils literal notranslate"><span class="pre">if</span></code>) should be done with hard tabs. Indentation for alignment should be done with spaces following the number of hard tabs indicated for control flow. This allows control flow indentation to be uniform no matter what the setting for tab width is on people’s editors.</p></li>
<li><p>Lines should be short.  The standard convention is 79 characters.  We’re not going to be anal
about this, but long lines should not be significantly longer than that, as they are hard to read.
For reference, most terminals open at 80 characters wide. If you need to continue a line, it should be indented four spaces deeper than the beginning of the line. For line widths, tabs are considered to represent 8 spaces.</p></li>
<li><p>For functions, the opening brace (<code class="docutils literal notranslate"><span class="pre">{</span></code>) should be on the line <em>following</em> the function definition. For classes, conditionals, and loops, it should be on the <em>same</em> line.</p></li>
<li><p>Where functions are not used outside of a single C++ file, they should be marked <code class="docutils literal notranslate"><span class="pre">static</span></code>.</p></li>
</ul>
<p>Conforming code looks like this:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">CONSTANT_VALUE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>

<span class="kt">void</span>
<span class="nf">function_name</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">variable_name</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">other</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">        </span><span class="n">do_some_things</span><span class="p">(</span><span class="n">variable_name</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">class</span><span class="w"> </span><span class="nc">MyClass</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">Parent</span><span class="w"> </span><span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">        </span><span class="n">MyClass</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">other_input</span><span class="p">);</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">ClassMethod</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">input</span><span class="p">);</span>
<span class="k">private</span><span class="o">:</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">instance_variable_</span><span class="p">;</span>
<span class="p">};</span>

<span class="n">MyClass</span><span class="o">::</span><span class="n">MyClass</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">other_input</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Parent</span><span class="p">(</span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span>
<span class="w">    </span><span class="s">&quot;long line&quot;</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">        </span><span class="n">instance_variable_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">other_input</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span>
<span class="n">MyClass</span><span class="o">::</span><span class="n">ClassMethod</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">input</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">        </span><span class="n">do_things</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Style Guide</a><ul>
<li><a class="reference internal" href="#version-control-hygiene">Version Control Hygiene</a><ul>
<li><a class="reference internal" href="#git">Git</a></li>
<li><a class="reference internal" href="#svn">SVN</a></li>
</ul>
</li>
<li><a class="reference internal" href="#coding-style">Coding Style</a><ul>
<li><a class="reference internal" href="#python-style-guide">Python Style Guide</a></li>
<li><a class="reference internal" href="#c-style-guide">C++ Style Guide</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="buildsystem.html"
                          title="previous chapter">Build System</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="networkstreaming.html"
                          title="next chapter">Network Streaming</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/styleguide.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="networkstreaming.html" title="Network Streaming"
             >next</a> |</li>
        <li class="right" >
          <a href="buildsystem.html" title="Build System"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">SPT3G Software  documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Style Guide</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright .
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3.
    </div>
  </body>
</html>