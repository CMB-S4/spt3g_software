
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Frames &#8212; SPT3G Software  documentation</title>
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Logging" href="logging.html" />
    <link rel="prev" title="Modules" href="modules.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="logging.html" title="Logging"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="modules.html" title="Modules"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">SPT3G Software  documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="frames">
<h1><a class="toc-backref" href="#id1">Frames</a><a class="headerlink" href="#frames" title="Permalink to this headline">¶</a></h1>
<p>The basic unit of data processing is the frame. Each frame is a free-form mapping from strings to data of a type derived from G3FrameObject. In general, they behave as Python dictionaries. Wrappers are provided for Python plain-old-data types (numbers, strings, etc.) so that they can be used directly.</p>
<p>Frames have fast serialization to and from disk (see the G3Reader and G3Writer modules in <a class="reference internal" href="fileio.html"><span class="doc">File IO</span></a>) with built-in data integrity protection. This serialization is accessible programmatically in Python through the Python pickle libraries, which are overridden to use the internal serialization.</p>
<p>Each frame has a type defined under the <code class="docutils literal notranslate"><span class="pre">core.G3FrameType</span></code> namespace. These are meant to indicate different types of data (calibration vs. scan data, for example) and, in general, many types of frames will be interleaved in the same data stream. A good general rule for whether data should be in a different frame type is to consider the rates at which the data change: data that change at the same speed (e.g. bolometer data and pointing) should share a frame, while data that change at different speeds (e.g. calibration constants and bolometer data) should be separated.</p>
<p>A brief description of the intention of each frame type follows along with a table containing a representative minimal set of data likely to be contained by a frame of a given type. The list is neither exhaustive nor truly minimal: other data can and will be present and some of the data listed here may have been removed or renamed. Neither is this an exhaustive list of frame types: any single character code can be [ab]used as a frame type for special purpose tools.</p>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#frames" id="id1">Frames</a><ul>
<li><a class="reference internal" href="#scan" id="id2">Scan</a></li>
<li><a class="reference internal" href="#pipelineinfo" id="id3">PipelineInfo</a></li>
<li><a class="reference internal" href="#timepoint" id="id4">Timepoint</a></li>
<li><a class="reference internal" href="#housekeeping" id="id5">Housekeeping</a></li>
<li><a class="reference internal" href="#map" id="id6">Map</a></li>
<li><a class="reference internal" href="#calibration" id="id7">Calibration</a></li>
<li><a class="reference internal" href="#observation" id="id8">Observation</a></li>
<li><a class="reference internal" href="#wiring" id="id9">Wiring</a></li>
<li><a class="reference internal" href="#gcpslow" id="id10">GcpSlow</a></li>
<li><a class="reference internal" href="#endprocessing" id="id11">EndProcessing</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="scan">
<h2><a class="toc-backref" href="#id2">Scan</a><a class="headerlink" href="#scan" title="Permalink to this headline">¶</a></h2>
<p>Scan frames are the most common unit of data for analysis. They contain the data from a single left-to-right (or right-to-left) scan of the telescope. Where quantities are bolometer-indexed, the names match those in the Wiring map.</p>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="8%" />
<col width="85%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>ACUStatus</td>
<td>ACUStatusVector</td>
<td>Sequences of gcp.ACUStatus objects containing the ACU state readout during the scan</td>
</tr>
<tr class="row-odd"><td>SourceName</td>
<td>G3String</td>
<td>Name of the source being observed</td>
</tr>
<tr class="row-even"><td>BoresightAz</td>
<td>G3Timestream</td>
<td>Telescope azimuth as a function of time</td>
</tr>
<tr class="row-odd"><td>BoresightEl</td>
<td>G3Timestream</td>
<td>Telescope elevation as a function of time</td>
</tr>
<tr class="row-even"><td>RawTimestreams_I</td>
<td>G3TimestreamMap</td>
<td>Raw (counts) timestreams from detectors, indexed by bolometer, I modulation</td>
</tr>
<tr class="row-odd"><td>RawTimestreams_Q</td>
<td>G3TimestreamMap</td>
<td>Raw (counts) timestreams from detectors, indexed by bolometer, Q modulation</td>
</tr>
<tr class="row-even"><td>CalTimestreams</td>
<td>G3TimestreamMap</td>
<td>Bolometer timestreams with some useful calibration applied (not present in raw data)</td>
</tr>
<tr class="row-odd"><td>TimestreamWeights</td>
<td>G3MapDouble</td>
<td>Floating point weights for each timestream, indexed by bolometer (not present in raw data)</td>
</tr>
<tr class="row-even"><td>ScanNumber</td>
<td>G3Int</td>
<td>Sequence number of the current scan within an observation</td>
</tr>
<tr class="row-odd"><td>Flags</td>
<td>G3MapVectorString</td>
<td>List of detectors with exceptional conditions. Indexed by bolometer ID. Each element is a list of strings that provides a description of the condition[s] that caused the detector to be flagged (not present in raw data).</td>
</tr>
<tr class="row-even"><td>Turnaround</td>
<td>G3Bool</td>
<td>Present and set to True if scan is a turnaround or otherwise is not a constant velocity scan. Absent otherwise.</td>
</tr>
<tr class="row-odd"><td>TrakerStatus</td>
<td>TrackerStatus</td>
<td>Composite tracker status information at all points during the scan.</td>
</tr>
<tr class="row-even"><td>DfMuxHousekeeping</td>
<td>DfMuxHousekeepingMap</td>
<td>Tree containing housekeeping data and configuration from the boards connected to the readout system, indexed by board IP address</td>
</tr>
<tr class="row-odd"><td>CalibratorOn</td>
<td>G3Timestream</td>
<td>Timestream of the calibrator sync signal. Set to 1 if the sync line is high and 0 otherwise. NaN if no readout.</td>
</tr>
<tr class="row-even"><td>GCPFeatureBits</td>
<td>G3VectorString</td>
<td>Strings describing the GCP flags field.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="pipelineinfo">
<h2><a class="toc-backref" href="#id3">PipelineInfo</a><a class="headerlink" href="#pipelineinfo" title="Permalink to this headline">¶</a></h2>
<p>PipelineInfo frames contain information on the processing applied to make the remainder of the data. They typically occur at the beginning of the data stream and are automatically inserted by G3Pipeline, if not previously present. The frame will contain at least one element of type G3PipelineInfo that gives information on the version of the software that made the data and the configuration of all modules and/or segments added to the pipeline. Other data (G3PipelineInfo from previous scripts, configuration information added by other modules) may also be present.</p>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="7%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>22-May-2019:18:42:15.335969000</td>
<td>G3PipelineInfo</td>
<td>Configuration information of the pipeline that produced an object. Added automatically. The key name is a timestamp indicating the time at which the software began running.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="timepoint">
<h2><a class="toc-backref" href="#id4">Timepoint</a><a class="headerlink" href="#timepoint" title="Permalink to this headline">¶</a></h2>
<p>Timepoint frames include sample-by-sample data from the mux system. They are emitted directly by the DfMuxBuilder as part of primary data acquisition and are generally not seen outside the South Pole or the lab. These are transformed into <a class="reference internal" href="#scan">Scan</a> frames by DfMuxCollator.</p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="11%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>EventHeader</td>
<td>G3Time</td>
<td>Time of the sample</td>
</tr>
<tr class="row-odd"><td>DfMux</td>
<td>DfMuxMetaSample</td>
<td>Tree containing data from the boards connected to the readout system, indexed by board IP address</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="housekeeping">
<h2><a class="toc-backref" href="#id5">Housekeeping</a><a class="headerlink" href="#housekeeping" title="Permalink to this headline">¶</a></h2>
<p>Contains housekeeping data. Issued periodically when housekeeping data is taken. Like <a class="reference internal" href="#timepoint">Timepoint</a> frames, these are rolled into <a class="reference internal" href="#scan">Scan</a> frames during processing and do not appear in general in stored data.</p>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="12%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>DfMuxHousekeeping</td>
<td>DfMuxHousekeepingMap</td>
<td>Tree containing housekeeping data and configuration from the boards connected to the readout system, indexed by board IP address</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="map">
<h2><a class="toc-backref" href="#id6">Map</a><a class="headerlink" href="#map" title="Permalink to this headline">¶</a></h2>
<p>Contains either the result of the map maker or the input to simulation.</p>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="6%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Id</td>
<td>G3String</td>
<td>A string identifying the map for the various processing steps</td>
</tr>
<tr class="row-odd"><td>T</td>
<td>G3SkyMap</td>
<td>A map storing the intensity information (could be sky intensity or sky intensity x weight).  In the case of maps that store abstract information like apodization masks or point source masks, the data will also be stored under the T key.  The motivation being it makes it easy to have G3Modules operating on maps also work on these.</td>
</tr>
<tr class="row-even"><td>Q</td>
<td>G3SkyMap</td>
<td>A map storing the Q polarization information (could be sky Q or sky Q x weight)</td>
</tr>
<tr class="row-odd"><td>U</td>
<td>G3SkyMap</td>
<td>A map storing the u polarization information (could be sky U or sky U x weight)</td>
</tr>
<tr class="row-even"><td>Wpol</td>
<td>G3SkyMapWeights</td>
<td>If the frame contains polarized information, this stores the t/q/u covariances scaled by the individual detector weights</td>
</tr>
<tr class="row-odd"><td>Wunpol</td>
<td>G3SkyMapWeights</td>
<td>This stores the unpolarized weight information</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="calibration">
<h2><a class="toc-backref" href="#id7">Calibration</a><a class="headerlink" href="#calibration" title="Permalink to this headline">¶</a></h2>
<p>This frame contains all measured calibration information (pointing, response, etc.) that may change when remeasured. It does <em>not</em> include static information describing how the instrument is set up (see <a class="reference internal" href="#wiring">Wiring</a> below).</p>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="12%" />
<col width="73%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>BolometerProperties</td>
<td>BolometerPropertiesMap</td>
<td>Measured non-configuration-dependent calibration properties of the instrument (pointing, pol efficiency, etc.), indexed by bolometer</td>
</tr>
<tr class="row-odd"><td>NominalBolometerProperties</td>
<td>BolometerPropertiesMap</td>
<td>As above, but what those properties were meant to be.</td>
</tr>
<tr class="row-even"><td>TimeConst</td>
<td>G3MapDouble</td>
<td>Time constants of the detectors. These can change with the bias point. Should perhaps be moved to the InstrumentStatus frame.</td>
</tr>
<tr class="row-odd"><td>RCW38FluxCalibration</td>
<td>G3MapDouble</td>
<td>Observed flux of RCW38 per detector as a fraction of the calibrator response.</td>
</tr>
<tr class="row-even"><td>CalibratorResponse</td>
<td>G3MapDouble</td>
<td>Observed response to the most recent calibrator observation for each detector in Watts.</td>
</tr>
<tr class="row-odd"><td>CalibratorResponseSN</td>
<td>G3MapDouble</td>
<td>Signal to noise (in sigma) of the most recent calibrator observation in sigma.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="observation">
<h2><a class="toc-backref" href="#id8">Observation</a><a class="headerlink" href="#observation" title="Permalink to this headline">¶</a></h2>
<p>Indicates global observation parameters. Changes at the beginning of a new observation, though, as with all metadata, repeat observation frames may appear during processing.</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="17%" />
<col width="63%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>SourceName</td>
<td>G3String</td>
<td>Name of the source being observed</td>
</tr>
<tr class="row-odd"><td>ObservationNumber</td>
<td>G3Int</td>
<td>Sequence number of the current observation since we started recording such things</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="wiring">
<h2><a class="toc-backref" href="#id9">Wiring</a><a class="headerlink" href="#wiring" title="Permalink to this headline">¶</a></h2>
<p>Gives the description of how the system is wired: notably, the connection between board serial number, module, channel and a bolometer ID.</p>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="9%" />
<col width="82%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>WiringMap</td>
<td>DfMuxWiringMap</td>
<td>Digest of the pydfmux channel mappings</td>
</tr>
<tr class="row-odd"><td>ReadoutSystem</td>
<td>G3String</td>
<td>Description of the type of readout system employed. Set to “DfMux” for SPTpol-style readout and “ICE” for 3G-style readout.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="gcpslow">
<h2><a class="toc-backref" href="#id10">GcpSlow</a><a class="headerlink" href="#gcpslow" title="Permalink to this headline">¶</a></h2>
<p>Holds all the GCP data sampled once per second. Like <a class="reference internal" href="#timepoint">Timepoint</a> and <a class="reference internal" href="#housekeeping">Housekeeping</a> frames, these data are consolidated in the Scan frames and do not appear in final data products. The data stored here begins as a strict copy of the GCP register map (see the GCP documentation for details, a few notable entries are summarized below). A few other keys are added transiently in the course of generating <a class="reference internal" href="#scan">Scan</a> frames.</p>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="25%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>array</td>
<td>G3MapFrameObject</td>
<td>Most of the data stored by GCP</td>
</tr>
<tr class="row-odd"><td>antenna0</td>
<td>G3MapFrameObject</td>
<td>Telescope pointing information</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="endprocessing">
<h2><a class="toc-backref" href="#id11">EndProcessing</a><a class="headerlink" href="#endprocessing" title="Permalink to this headline">¶</a></h2>
<p>EndProcessing is a special-purpose frame emitted implicitly by G3Pipeline at the end of processing. No further frames will occur after this and reception of an EndProcessing frame is intended as a signal to modules that they should clear any internally buffered data and clean up.</p>
<p>EndProcessing frames should, in general, contain no data.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Frames</a><ul>
<li><a class="reference internal" href="#scan">Scan</a></li>
<li><a class="reference internal" href="#pipelineinfo">PipelineInfo</a></li>
<li><a class="reference internal" href="#timepoint">Timepoint</a></li>
<li><a class="reference internal" href="#housekeeping">Housekeeping</a></li>
<li><a class="reference internal" href="#map">Map</a></li>
<li><a class="reference internal" href="#calibration">Calibration</a></li>
<li><a class="reference internal" href="#observation">Observation</a></li>
<li><a class="reference internal" href="#wiring">Wiring</a></li>
<li><a class="reference internal" href="#gcpslow">GcpSlow</a></li>
<li><a class="reference internal" href="#endprocessing">EndProcessing</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="modules.html"
                        title="previous chapter">Modules</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="logging.html"
                        title="next chapter">Logging</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/frames.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="logging.html" title="Logging"
             >next</a> |</li>
        <li class="right" >
          <a href="modules.html" title="Modules"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">SPT3G Software  documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright .
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.2.
    </div>
  </body>
</html>