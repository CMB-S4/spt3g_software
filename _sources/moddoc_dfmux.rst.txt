.. include:: intro_dfmux.rst

API Documentation
=================

.. contents:: Contents
   :depth: 1
   :local:

Frame Objects
-------------

Serializable objects that may be stored as entries in :py:class:`~spt3g.core.G3Frame` objects.

.. autoclass:: spt3g.dfmux.DfMuxBoardSamples

.. autoclass:: spt3g.dfmux.DfMuxChannelMapping

.. autoclass:: spt3g.dfmux.DfMuxHousekeepingMap

.. autoclass:: spt3g.dfmux.DfMuxMetaSample

.. autoclass:: spt3g.dfmux.DfMuxSample

.. autoclass:: spt3g.dfmux.DfMuxWiringMap

.. autoclass:: spt3g.dfmux.HkBoardInfo

.. autoclass:: spt3g.dfmux.HkChannelInfo

.. autoclass:: spt3g.dfmux.HkMezzanineInfo

.. autoclass:: spt3g.dfmux.HkModuleInfo

Class-like Pipeline Modules
---------------------------


Classes that can be added to :py:class:`~spt3g.core.G3Pipeline`
instances, either written as callable objects in Python (see
:ref:`class-modules`) or as :py:class:`~spt3g.core.G3Module`-derived
classes in C++ (see :ref:`cxx-modules`).  Aside from adding these into
pipelines using the standard ``Add()`` method, such objects may also be
instantiated outside of pipelines to make use of additional features.

One typical use case is to extract some kind of data from a series of
frames::

    class ExtractData:
        def __init__(self, key="RawTimestreams"):
            self.key = key
            self.data = []
        def __call__(self, frame):
            if self.key in frame:
                self.data.append(frame[self.key])

    # instantiate caching class
    extractor = ExtractData()

    # use instance in a pipeline
    pipe = core.G3Pipeline()
    pipe.Add(core.G3Reader, filename="file.g3")
    pipe.Add(extractor)
    pipe.Run()

    # use extracted data in later processing
    print(extractor.data)

Another use case may be to call additional methods of a class.  For
example, the :py:class:`~spt3g.core.G3Writer` class can be used as a
context manager, and also report the position of the file pointer after
each frame is written::

    with core.G3Writer("file.g3") as writer:
        for frame in frames:
            writer(frame)
            print("Bytes written:", writer.tell())

Class-like modules permit a variety of additional features beyond
their standard usage in pipelines.


.. autoclass:: spt3g.dfmux.DataQualityTools.FillMissingTimepointFrames

.. autoclass:: spt3g.dfmux.DfMuxBuilder

.. autoclass:: spt3g.dfmux.DfMuxCollator

.. autoclass:: spt3g.dfmux.HardwareMapTools.DfmlHardwareMapInjector

.. autoclass:: spt3g.dfmux.HardwareMapTools.GenerateFakeHardwareMap

.. autoclass:: spt3g.dfmux.HardwareMapTools.PyDfMuxWiringMapInjector

.. autoclass:: spt3g.dfmux.Housekeeping.HousekeepingConsumer

.. autoclass:: spt3g.dfmux.Housekeeping.PeriodicHousekeepingCollector

.. autoclass:: spt3g.dfmux.LegacyHousekeeping.LegacyHousekeepingConsumer

.. autoclass:: spt3g.dfmux.NetCDFDump

.. autoclass:: spt3g.dfmux.ScanTools.FixedLengthScans

.. autoclass:: spt3g.dfmux.unittransforms.ConvertTimestreamUnits

Function-like Pipeline Modules
------------------------------

Python functions that can be added to :py:class:`~spt3g.core.G3Pipeline` instances. Such functions may also be called directly with a :py:class:`~spt3g.core.G3Frame` object as the first argument, and do not necessarily need to be used in a pipeline. See :ref:`function-modules` for more detail.

.. autofunction:: spt3g.dfmux.HardwareMapTools.PyDfMuxBolometerPropertiesInjector

Useful Classes
--------------

Various Python and C++ classes that are part of the public API.

.. autoclass:: spt3g.dfmux.DfMuxCollector

.. autoclass:: spt3g.dfmux.HkChannelInfoMap

.. autoclass:: spt3g.dfmux.HkMezzanineInfoMap

.. autoclass:: spt3g.dfmux.HkModuleInfoMap

.. autoclass:: spt3g.dfmux.LegacyDfMuxCollector

Useful Functions
----------------

Various Python and C++ functions that are part of the public API.

.. autofunction:: spt3g.dfmux.HardwareMapTools.PathStringForBolo

.. autofunction:: spt3g.dfmux.Housekeeping.HousekeepingForBolo

.. autofunction:: spt3g.dfmux.unittransforms.get_timestream_unit_conversion


