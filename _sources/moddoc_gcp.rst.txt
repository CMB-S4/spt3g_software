.. include:: intro_gcp.rst

API Documentation
=================

.. contents:: Contents
   :depth: 1
   :local:

Frame Objects
-------------

Serializable objects that may be stored as entries in :py:class:`~spt3g.core.G3Frame` objects.

.. autoclass:: spt3g.gcp.ACUStatus

.. autoclass:: spt3g.gcp.ACUStatusVector

.. autoclass:: spt3g.gcp.TrackerPointing

.. autoclass:: spt3g.gcp.TrackerStatus

Class-like Pipeline Modules
---------------------------


Classes that can be added to :py:class:`~spt3g.core.G3Pipeline`
instances, either written as callable objects in Python (see
:ref:`class-modules`) or as :py:class:`~spt3g.core.G3Module`-derived
classes in C++ (see :ref:`cxx-modules`).  Aside from adding these into
pipelines using the standard ``Add()`` method, such objects may also be
instantiated outside of pipelines to make use of additional features.

One typical use case is to extract some kind of data from a series of
frames::

    class ExtractData:
        def __init__(self, key="RawTimestreams"):
            self.key = key
            self.data = []
        def __call__(self, frame):
            if self.key in frame:
                self.data.append(frame[self.key])

    # instantiate caching class
    extractor = ExtractData()

    # use instance in a pipeline
    pipe = core.G3Pipeline()
    pipe.Add(core.G3Reader, filename="file.g3")
    pipe.Add(extractor)
    pipe.Run()

    # use extracted data in later processing
    print(extractor.data)

Another use case may be to call additional methods of a class.  For
example, the :py:class:`~spt3g.core.G3Writer` class can be used as a
context manager, and also report the position of the file pointer after
each frame is written::

    with core.G3Writer("file.g3") as writer:
        for frame in frames:
            writer(frame)
            print("Bytes written:", writer.tell())

Class-like modules permit a variety of additional features beyond
their standard usage in pipelines.


.. autoclass:: spt3g.gcp.ARCExtractor.CalibrateFrame

.. autoclass:: spt3g.gcp.ARCFileReader

.. autoclass:: spt3g.gcp.ARCHKExtractor.UnpackSPTpolHKData

.. autoclass:: spt3g.gcp.GCPDataTee.DAQWatchdog

.. autoclass:: spt3g.gcp.GCPDataTee.GCPBoloDataTee

.. autoclass:: spt3g.gcp.GCPDataTee.GCPHousekeepingTee

.. autoclass:: spt3g.gcp.GCPDataTee.GCPSignalledHousekeeping

.. autoclass:: spt3g.gcp.GCPDataTee.PagerWatchdog

.. autoclass:: spt3g.gcp.GCPMuxDataDecoder

Function-like Pipeline Modules
------------------------------

Python functions that can be added to :py:class:`~spt3g.core.G3Pipeline` instances. Such functions may also be called directly with a :py:class:`~spt3g.core.G3Frame` object as the first argument, and do not necessarily need to be used in a pipeline. See :ref:`function-modules` for more detail.

.. autofunction:: spt3g.gcp.ARCExtractor.AddBenchData

.. autofunction:: spt3g.gcp.ARCExtractor.DecryptFeatureBit

.. autofunction:: spt3g.gcp.ARCExtractor.UnpackACUData

.. autofunction:: spt3g.gcp.ARCExtractor.UnpackCryoData

.. autofunction:: spt3g.gcp.ARCExtractor.UnpackMuxData

.. autofunction:: spt3g.gcp.ARCExtractor.UnpackPTData

.. autofunction:: spt3g.gcp.ARCExtractor.UnpackTrackerData

.. autofunction:: spt3g.gcp.ARCExtractor.UnpackTrackerMinimal

.. autofunction:: spt3g.gcp.ARCExtractor.UnpackTrackerPointingData

.. autofunction:: spt3g.gcp.ARCExtractor.UnpackWeatherData

.. autofunction:: spt3g.gcp.ARCExtractor.UpdateLinearSensorDeltas

.. autofunction:: spt3g.gcp.InfluxDB.WriteDB

Pipeline Segments
-----------------

Python functions that combine a sequence of pipeline modules, and can be added to :py:class:`~spt3g.core.G3Pipeline` instances. See :ref:`pipesegments` for more detail.

.. autofunction:: spt3g.gcp.ARCExtractor.ARCExtract

.. autofunction:: spt3g.gcp.ARCExtractor.ARCExtractMinimal

.. autofunction:: spt3g.gcp.InfluxDB.UpdateDB

Useful Classes
--------------

Various Python and C++ classes that are part of the public API.

.. autoclass:: spt3g.gcp.ARCFile.ARCFile

.. autoclass:: spt3g.gcp.CalFile.CalFileReader

.. autoclass:: spt3g.gcp.GCPLogger

.. autoclass:: spt3g.gcp.TrackerStateVector

Useful Functions
----------------

Various Python and C++ functions that are part of the public API.

.. autofunction:: spt3g.gcp.CalFile.create_g3_cal_file


